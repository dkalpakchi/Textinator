<nav class="navbar has-shadow has-bottom-border is-dark is-fixed-top" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a href="/textinator" class='navbar-item logo'>Textinator</a>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="mainMenu">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="mainMenu" class="navbar-menu">
    <div class="navbar-start">
      <a class="navbar-item{% if request.path == url('projects:index') and request.GET.n == 'p' or 'n' not in request.GET %} is-active{% endif %}" href="{{ url('projects:index') }}?n=p">
        <span class="icon is-small"><i class="fas fa-medal" aria-hidden="true"></i></span>
        <span>My Challenges</span>
      </a>

      <a class="navbar-item{% if request.path == url('projects:index') and request.GET.n == 'o' %} is-active{% endif %}" href="{{ url('projects:index') }}?n=o">
        <span class="icon is-small"><i class="fas fa-trophy" aria-hidden="true"></i></span>
        <span>Open Challenges</span>
      </a>

      {% if user_projects %}
        <a class="navbar-item{% if request.path == url('projects:index') and request.GET.n == 'mp' %} is-active{% endif %}" href="{{ url('projects:index') }}?n=mp">
          <span class="icon is-small"><i class="fas fa-project-diagram" aria-hidden="true"></i></span>
          <span>My Projects</span>
        </a>
      {% endif %}

      {% if shared_projects %}
        <a class="navbar-item{% if request.path == url('projects:index') and request.GET.n == 'sp' %} is-active{% endif %}" href="{{ url('projects:index') }}?n=sp">
          <span class="icon is-small"><i class="fas fa-users" aria-hidden="true"></i></span>
          <span>Shared projects</span>

          &nbsp;&nbsp;<span id="newShared" class="tag is-danger is-normal is-rounded {% if newly_shared|length <= 0 %}is-hidden{% endif %}">
            {{newly_shared|length}}
          </span>
        </a>
      {% endif %}

      <a class="navbar-item" href="{{ url('survey-list') }}">
        <span class="icon is-small"><i class="fas fa-list-alt" aria-hidden="true"></i></span>
        <span>Surveys</span>
      </a>
    </div>
      

    <div class="navbar-end">
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">
          <span class="icon is-small">
            <i class="fas fa-user" aria-hidden="true"></i>
          </span>
          <span>My Profile</span>
        </a>

        <div class="navbar-dropdown">
          {% if project and (project.author == user or project.shared_with(user) or project.has_participant(user)) %}
            <a href="{{ url('projects:data_explorer', kwargs={'proj': project.pk}) }}" class='admin navbar-item'>
              <span class="icon is-small"><i class="fas fa-chart-bar"></i></span>
              <span>Data explorer</span>
            </a>
          {% endif %}
          {# <a href="{{ url('users:settings') }}" class='navbar-item'>
            <span class="icon is-small"><i class="fas fa-cog"></i></span>
            <span>Settings</span>
          </a> #}
          {% if user.is_staff %}
            {% if project %}
            <a href="{{ url('admin:projects_project_change', kwargs={'object_id': project.id}) }}" class='admin navbar-item'>
            {% else %}
            <a href="{{ url('admin:index') }}" class='admin navbar-item'>
            {% endif %}
              <span class="icon is-small"><i class="fas fa-user-shield"></i></span>
              <span>Admin</span>
            </a>
          {% endif %}
          <hr class="navbar-divider">
          <a href="{{ url('logout') }}" class="navbar-item">
            <span class="icon is-small"><i class="fas fa-sign-out-alt"></i></span>
            <span>Logout</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>